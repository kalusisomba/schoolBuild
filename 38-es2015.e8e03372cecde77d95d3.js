(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{Olgc:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("fXoL"),i=r("7zfz");let s=(()=>{class e{constructor(e){this.messageService=e}addSingle(e,t,r){this.messageService.add({severity:e,summary:t,detail:r})}addMultiple(e){this.messageService.addAll(e)}clear(){this.messageService.clear()}}return e.\u0275fac=function(t){return new(t||e)(a.Zb(i.d))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},jPF5:function(e,t,r){"use strict";r.r(t);var a=r("ofXK"),i=r("tyNb"),s=r("J7/z"),n=r("AlMu"),o=r("Olgc"),c=r("e0Eu"),l=r("tvG+"),h=r("5JmO"),p=r.n(h),d=r("TruH"),b=r.n(d),u=r("uIk+"),g=r("fXoL");p.a.vfs=b.a.pdfMake.vfs;let f=(()=>{class e{constructor(e){this.canvas=e}setTitle(e,t,r,a,i,s,n){let o,c;return"A6"===n?(o=[15,10,0,10],c=8):(o=[15,10,0,10],c=10),[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:c,alignment:"center",bold:!0}],[{text:r,fontSize:c,alignment:"center"}],[{text:a,fontSize:c,alignment:"center",italics:!0}],[{text:i,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(e){const t={fila_0:{}};return e.forEach((e,r)=>{t.fila_0["col_"+(+r+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}}),t}createBody(e,t){const r=[];for(const a in e){const t=[];for(const r in e[a])t.push(e[a][r]);r.push(t)}return t.forEach(e=>{const t=[];for(const r in e)t.push(e[r]);r.push(t)}),r}getDocDefinition(e,t,r,a,i,s,n,o,c,l){const h={header:{title:e,header1:t,header2:r,header3:a},body:{header:s,record:n}},p=this.createBody(this.createTableHeader(h.body.header),h.body.record);let d,b,u;return"A6"===l?(d=[10,110,10,55],b=10,u=7):(b=16,u=10,d=[10,110,10,55]),{pageOrientation:o,pageSize:l,pageMargins:d,header:this.setTitle(i,e,t,r,a,h,l),footer:(e,t)=>({text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:c,headerRows:1,body:p}}],styles:{header:{fontSize:b,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:u}}}}generatePdf(e){p.a.createPdf(e).print()}getPdfData(e){const t=["50%","50%"],r=["Class","Teacher"],a=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(i=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",a,i,r,this.mapData(e),"portrait",t,"A4"))})}mapData(e){return e.map(e=>({class:e.classID,teacher:e.teacherID}))}}return e.\u0275fac=function(t){return new(t||e)(g.Zb(u.a))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=r("24YL"),S=r("7CaW"),C=r("rEr+"),v=r("7zfz"),T=r("3Pt+"),w=r("7kUa");function y(e,t){1&e&&(g.Vb(0,"tr",12),g.Vb(1,"th"),g.Ic(2,"Class"),g.Ub(),g.Vb(3,"th"),g.Ic(4,"Teacher Name"),g.Ub(),g.Vb(5,"th"),g.Ic(6,"Action"),g.Ub(),g.Ub())}const I=function(e){return["/main/classTeacher/","classTeacher-details",e]},U=function(e){return["/main/classTeacher/","classTeacher-edit",e]};function O(e,t){if(1&e&&(g.Vb(0,"tr",12),g.Vb(1,"td"),g.Ic(2),g.Ub(),g.Vb(3,"td"),g.Ic(4),g.Ub(),g.Vb(5,"td"),g.Vb(6,"div",13),g.Vb(7,"button",14),g.Ic(8,"View"),g.Ub(),g.Vb(9,"button",15),g.Ic(10,"Edit"),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&e){const e=t.$implicit;g.Db(2),g.Jc(e.classID.unitName),g.Db(2),g.Kc(" ",e.teacherID," "),g.Db(3),g.nc("routerLink",g.qc(4,I,e._id)),g.Db(2),g.nc("routerLink",g.qc(6,U,e._id))}}function A(e,t){1&e&&(g.Vb(0,"tr"),g.Vb(1,"td"),g.Ic(2,"No data found."),g.Ub(),g.Ub())}const D=[{path:"",component:(()=>{class e{constructor(e,t,r,a,i){this.dialogService=e,this.toastService=t,this.applicationStateService=r,this.teachersService=a,this.pdfService=i,this.classTeacher=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"classID",header:"Class"},{field:"teacherID",header:"Teacher Name"}],this.getClassTeachers()}getClassTeachers(){this.teachersService.getClassTeachers().subscribe(e=>{this.classTeacher=e.data,this.toastService.addSingle("success","data Loaded","")},e=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")})}openNew(){this.dialogService.open(l.a,{data:{},header:"Add New Teacher",width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(e=>{e&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.classTeacher)}}return e.\u0275fac=function(t){return new(t||e)(g.Pb(s.a),g.Pb(o.a),g.Pb(n.a),g.Pb(c.a),g.Pb(f))},e.\u0275cmp=g.Jb({type:e,selectors:[["app-class-teacher-list"]],features:[g.Cb([s.a])],decls:17,vars:5,consts:[["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["header","classTeacher"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"]],template:function(e,t){1&e&&(g.Qb(0,"app-header-breadcrumb"),g.Vb(1,"div"),g.Vb(2,"button",0),g.dc("click",(function(){return t.openNew()})),g.Ic(3,"Create ClassTeacher"),g.Ub(),g.Vb(4,"button",1),g.dc("click",(function(){return t.exportPdf()})),g.Ic(5,"classTeacher report"),g.Ub(),g.Ub(),g.Vb(6,"p-panel",2),g.Vb(7,"p-table",3),g.Gc(8,y,7,0,"ng-template",4),g.Gc(9,O,11,8,"ng-template",5),g.Gc(10,A,3,0,"ng-template",6),g.Ub(),g.Vb(11,"div",7),g.Vb(12,"div",8),g.Vb(13,"label",9),g.Ic(14,"Page Size:"),g.Ub(),g.Ub(),g.Vb(15,"div",10),g.Vb(16,"input",11),g.dc("ngModelChange",(function(e){return t.pageSize=e})),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&e&&(g.Db(7),g.nc("value",t.classTeacher)("paginator",!0)("rows",t.pageSize)("showCurrentPageReport",!0),g.Db(9),g.nc("ngModel",t.pageSize))},directives:[m.a,S.a,C.c,v.e,T.b,w.a,T.k,T.n,i.d],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=g.Nb({type:e}),e.\u0275inj=g.Mb({factory:function(t){return new(t||e)},imports:[[i.g.forChild(D)],i.g]}),e})();var V=r("EQGD"),L=r("K0h9");r.d(t,"ClassTeacherListModule",(function(){return R}));let R=(()=>{class e{}return e.\u0275mod=g.Nb({type:e}),e.\u0275inj=g.Mb({factory:function(t){return new(t||e)},imports:[[a.b,P,L.a,V.a]]}),e})()},xHgC:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r("tk/3"),i=r("z6cu"),s=r("JIr8"),n=r("AytR"),o=r("fXoL");let c=(()=>{class e{constructor(e){this.httpClient=e,this.apiURL=n.a.apiUrl,this.httpOptions={headers:new a.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}getClasses(){return this.httpClient.get(this.apiURL+"/units/getallunits",this.httpOptions).pipe(Object(s.a)(this.errorHandler))}getClass(e){return this.httpClient.get(`${this.apiURL}/units/getunit/${e}`,this.httpOptions).pipe(Object(s.a)(this.errorHandler))}createClass(e){return this.httpClient.post(`${this.apiURL}/units/registerunit`,JSON.stringify(e),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}updateClass(e,t){return this.httpClient.patch(`${this.apiURL}/units/updateunit`,JSON.stringify(t),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}deleteClass(e){return this.httpClient.delete(`${this.apiURL}/units/archive/${e}`,this.httpOptions).pipe(Object(s.a)(this.errorHandler))}errorHandler(e){let t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t=`Server Side Error Code: ${e.status}\n Message: ${e.message}`,console.log(t)),Object(i.a)(console.log(t))}}return e.\u0275fac=function(t){return new(t||e)(o.Zb(a.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
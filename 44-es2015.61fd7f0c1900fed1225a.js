(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{E0oT:function(e,t,i){"use strict";i.r(t);var r=i("ofXK"),n=i("tyNb"),a=i("J7/z"),o=i("AlMu"),s=i("Olgc"),c=i("5JmO"),l=i.n(c),h=i("TruH"),d=i.n(h),p=i("uIk+"),b=i("fXoL");l.a.vfs=d.a.pdfMake.vfs;let u=(()=>{class e{constructor(e){this.canvas=e}setTitle(e,t,i,r,n,a,o){let s,c;return"A6"===o?(s=[15,10,0,10],c=8):(s=[15,10,0,10],c=10),[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:c,alignment:"center",bold:!0}],[{text:i,fontSize:c,alignment:"center"}],[{text:r,fontSize:c,alignment:"center",italics:!0}],[{text:n,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(e){const t={fila_0:{}};return e.forEach((e,i)=>{t.fila_0["col_"+(+i+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}}),t}createBody(e,t){const i=[];for(const r in e){const t=[];for(const i in e[r])t.push(e[r][i]);i.push(t)}return t.forEach(e=>{const t=[];for(const i in e)t.push(e[i]);i.push(t)}),i}getDocDefinition(e,t,i,r,n,a,o,s,c,l){const h={header:{title:e,header1:t,header2:i,header3:r},body:{header:a,record:o}},d=this.createBody(this.createTableHeader(h.body.header),h.body.record);let p,b,u;return"A6"===l?(p=[10,110,10,55],b=10,u=7):(b=16,u=10,p=[10,110,10,55]),{pageOrientation:s,pageSize:l,pageMargins:p,header:this.setTitle(n,e,t,i,r,h,l),footer:(e,t)=>({text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:c,headerRows:1,body:d}}],styles:{header:{fontSize:b,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:u}}}}generatePdf(e){l.a.createPdf(e).print()}getPdfData(e){const t=["25%","25%","25%","25%"],i=["Title","Name","Role","Phone Number"],r=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(n=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",r,n,i,this.mapData(e),"portrait",t,"A4"))})}mapData(e){return e.map(e=>({Title:e.teacherTitile,Name:e.teacherName,Role:e.teacherRole,Contact:e.teacherContact}))}}return e.\u0275fac=function(t){return new(t||e)(b.Zb(p.a))},e.\u0275prov=b.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=i("RK+W"),f=i("7dYx"),m=i("24YL"),S=i("7CaW"),v=i("rEr+"),C=i("7zfz"),w=i("3Pt+"),T=i("7kUa");function y(e,t){if(1&e&&(b.Vb(0,"th"),b.Ic(1),b.Ub()),2&e){const e=t.$implicit;b.Db(1),b.Kc(" ",e.header," ")}}function O(e,t){if(1&e&&(b.Vb(0,"tr",12),b.Gc(1,y,2,1,"th",13),b.Vb(2,"th"),b.Ic(3,"Action"),b.Ub(),b.Ub()),2&e){const e=b.gc();b.Db(1),b.nc("ngForOf",e.columns)}}function U(e,t){if(1&e&&(b.Vb(0,"td"),b.Vb(1,"div"),b.Ic(2),b.Ub(),b.Ub()),2&e){const e=t.$implicit,i=b.gc().$implicit;b.Db(2),b.Jc(i[e.field])}}const R=function(e){return["/main/teachers/","teacher-details",e]},I=function(e){return["/main/teachers/","teacher-edit",e]};function P(e,t){if(1&e){const e=b.Wb();b.Vb(0,"tr",12),b.Gc(1,U,3,1,"td",13),b.Vb(2,"td"),b.Vb(3,"div",14),b.Vb(4,"button",15),b.Ic(5,"View"),b.Ub(),b.Vb(6,"button",16),b.Ic(7,"Edit"),b.Ub(),b.Vb(8,"button",17),b.dc("click",(function(){b.zc(e);const i=t.$implicit;return b.gc().deleteTeacher(i._id)})),b.Ic(9,"Delete"),b.Ub(),b.Ub(),b.Ub(),b.Ub()}if(2&e){const e=t.$implicit,i=b.gc();b.Db(1),b.nc("ngForOf",i.columns),b.Db(3),b.nc("routerLink",b.qc(3,R,e._id)),b.Db(2),b.nc("routerLink",b.qc(5,I,e._id))}}function A(e,t){1&e&&(b.Vb(0,"tr"),b.Vb(1,"td"),b.Ic(2,"No data found."),b.Ub(),b.Ub())}const V=[{path:"",component:(()=>{class e{constructor(e,t,i,r,n){this.dialogService=e,this.toastService=t,this.applicationStateService=i,this.teachersService=r,this.pdfService=n,this.teachers=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"teacherTitile",header:"Title"},{field:"teacherName",header:"Name"},{field:"teacherRole",header:"Role"},{field:"teacherContact",header:"Phone Number"}],this.getTeachers()}getTeachers(){this.teachersService.getTeachers().subscribe(e=>{this.teachers=e.data,this.toastService.addSingle("success","data Loaded","")},e=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")})}openNew(){this.dialogService.open(g.a,{data:{},header:"Add New Teacher",width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(e=>{e&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.teachers)}}return e.\u0275fac=function(t){return new(t||e)(b.Pb(a.a),b.Pb(s.a),b.Pb(o.a),b.Pb(f.a),b.Pb(u))},e.\u0275cmp=b.Jb({type:e,selectors:[["app-teacher-list"]],features:[b.Cb([a.a])],decls:17,vars:5,consts:[["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["header","Teachers"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,t){1&e&&(b.Qb(0,"app-header-breadcrumb"),b.Vb(1,"div"),b.Vb(2,"button",0),b.dc("click",(function(){return t.openNew()})),b.Ic(3,"Create Teacher"),b.Ub(),b.Vb(4,"button",1),b.dc("click",(function(){return t.exportPdf()})),b.Ic(5,"Teacher report"),b.Ub(),b.Ub(),b.Vb(6,"p-panel",2),b.Vb(7,"p-table",3),b.Gc(8,O,4,1,"ng-template",4),b.Gc(9,P,10,7,"ng-template",5),b.Gc(10,A,3,0,"ng-template",6),b.Ub(),b.Vb(11,"div",7),b.Vb(12,"div",8),b.Vb(13,"label",9),b.Ic(14,"Page Size:"),b.Ub(),b.Ub(),b.Vb(15,"div",10),b.Vb(16,"input",11),b.dc("ngModelChange",(function(e){return t.pageSize=e})),b.Ub(),b.Ub(),b.Ub(),b.Ub()),2&e&&(b.Db(7),b.nc("value",t.teachers)("paginator",!0)("rows",t.pageSize)("showCurrentPageReport",!0),b.Db(9),b.nc("ngModel",t.pageSize))},directives:[m.a,S.a,v.c,C.e,w.b,T.a,w.k,w.n,r.j,n.d],styles:[""]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=b.Nb({type:e}),e.\u0275inj=b.Mb({factory:function(t){return new(t||e)},imports:[[n.g.forChild(V)],n.g]}),e})();var D=i("EQGD"),z=i("K0h9");i.d(t,"TeacherListModule",(function(){return N}));let N=(()=>{class e{}return e.\u0275mod=b.Nb({type:e}),e.\u0275inj=b.Mb({factory:function(t){return new(t||e)},imports:[[r.b,L,z.a,D.a]]}),e})()},Olgc:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("fXoL"),n=i("7zfz");let a=(()=>{class e{constructor(e){this.messageService=e}addSingle(e,t,i){this.messageService.add({severity:e,summary:t,detail:i})}addMultiple(e){this.messageService.addAll(e)}clear(){this.messageService.clear()}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.d))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},xHgC:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var r=i("tk/3"),n=i("z6cu"),a=i("JIr8"),o=i("AytR"),s=i("fXoL");let c=(()=>{class e{constructor(e){this.httpClient=e,this.apiURL=o.a.apiUrl,this.httpOptions={headers:new r.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}getClasses(){return this.httpClient.get(this.apiURL+"/units/getallunits",this.httpOptions).pipe(Object(a.a)(this.errorHandler))}getClass(e){return this.httpClient.get(`${this.apiURL}/units/getunit/${e}`,this.httpOptions).pipe(Object(a.a)(this.errorHandler))}createClass(e){return this.httpClient.post(`${this.apiURL}/units/registerunit`,JSON.stringify(e),this.httpOptions).pipe(Object(a.a)(this.errorHandler))}updateClass(e,t){return this.httpClient.patch(`${this.apiURL}/units/updateunit`,JSON.stringify(t),this.httpOptions).pipe(Object(a.a)(this.errorHandler))}deleteClass(e){return this.httpClient.delete(`${this.apiURL}/units/archive/${e}`,this.httpOptions).pipe(Object(a.a)(this.errorHandler))}errorHandler(e){let t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t=`Server Side Error Code: ${e.status}\n Message: ${e.message}`,console.log(t)),Object(n.a)(console.log(t))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(r.a))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{KLHr:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),r=n("tyNb"),a=n("J7/z"),o=n("AlMu"),s=n("Olgc"),c=n("Jvyb"),d=n("bojg"),l=n("5JmO"),b=n.n(l),p=n("TruH"),u=n.n(p),f=n("uIk+"),g=n("fXoL");b.a.vfs=u.a.pdfMake.vfs;let h=(()=>{class t{constructor(t){this.canvas=t}setTitle(t,e,n,i,r,a,o){let s,c;return"A6"===o?(s=[15,10,0,10],c=8):(s=[15,10,0,10],c=10),[{table:{widths:["100%","0%"],body:[[{image:t,alignment:"center",width:60,height:30}],[{text:e,fontSize:c,alignment:"center",bold:!0}],[{text:n,fontSize:c,alignment:"center"}],[{text:i,fontSize:c,alignment:"center",italics:!0}],[{text:r,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(t){const e={fila_0:{}};return t.forEach((t,n)=>{e.fila_0["col_"+(+n+1)]={text:t,style:"tableHeader",margin:[0,8,0,0]}}),e}createBody(t,e){const n=[];for(const i in t){const e=[];for(const n in t[i])e.push(t[i][n]);n.push(e)}return e.forEach(t=>{const e=[];for(const n in t)e.push(t[n]);n.push(e)}),n}getDocDefinition(t,e,n,i,r,a,o,s,c,d){const l={header:{title:t,header1:e,header2:n,header3:i},body:{header:a,record:o}},b=this.createBody(this.createTableHeader(l.body.header),l.body.record);let p,u,f;return"A6"===d?(p=[10,110,10,55],u=10,f=7):(u=16,f=10,p=[10,110,10,55]),{pageOrientation:s,pageSize:d,pageMargins:p,header:this.setTitle(r,t,e,n,i,l,d),footer:(t,e)=>({text:"Page "+t.toString()+" of "+e,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:c,headerRows:1,body:b}}],styles:{header:{fontSize:u,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:f}}}}generatePdf(t){b.a.createPdf(t).print()}getPdfData(t){const e=["32%","32%","36%"],n=["Parent/Guardian","Parent/Guardian","Student"],i=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(r=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,r,n,this.mapData(t),"portrait",e,"A4"))})}mapData(t){return t.map(t=>({Name:t.firstParent,Name2:t.secondParent,Code:t.studentID}))}}return t.\u0275fac=function(e){return new(e||t)(g.Zb(f.a))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n("24YL"),S=n("7CaW"),v=n("rEr+"),P=n("7zfz"),y=n("3Pt+"),w=n("7kUa");function I(t,e){if(1&t&&(g.Vb(0,"th"),g.Ic(1),g.Ub()),2&t){const t=e.$implicit;g.Db(1),g.Kc(" ",t.header," ")}}function D(t,e){if(1&t&&(g.Vb(0,"tr",11),g.Gc(1,I,2,1,"th",12),g.Vb(2,"th"),g.Ic(3,"Student"),g.Ub(),g.Vb(4,"th"),g.Ic(5,"Action"),g.Ub(),g.Ub()),2&t){const t=g.gc();g.Db(1),g.nc("ngForOf",t.columns)}}function U(t,e){if(1&t&&(g.Vb(0,"td"),g.Vb(1,"div"),g.Ic(2),g.Ub(),g.Ub()),2&t){const t=e.$implicit,n=g.gc().$implicit;g.Db(2),g.Jc(n[t.field])}}const V=function(t){return["/main/parents/","parent-details",t]},k=function(t){return["/main/parents/","parent-edit",t]};function x(t,e){if(1&t){const t=g.Wb();g.Vb(0,"tr",11),g.Gc(1,U,3,1,"td",12),g.Vb(2,"td"),g.Ic(3),g.Ub(),g.Vb(4,"td"),g.Vb(5,"div",13),g.Vb(6,"button",14),g.Ic(7,"View"),g.Ub(),g.Vb(8,"button",15),g.Ic(9,"Edit"),g.Ub(),g.Vb(10,"button",16),g.dc("click",(function(){g.zc(t);const n=e.$implicit;return g.gc().deleteParent(n._id)})),g.Ic(11,"Delete"),g.Ub(),g.Ub(),g.Ub(),g.Ub()}if(2&t){const t=e.$implicit,n=g.gc();g.Db(1),g.nc("ngForOf",n.columns),g.Db(2),g.Jc(t.studentID.studentName),g.Db(3),g.nc("routerLink",g.qc(4,V,t._id)),g.Db(2),g.nc("routerLink",g.qc(6,k,t._id))}}const z=[{path:"",component:(()=>{class t{constructor(t,e,n,i,r){this.dialogService=t,this.toastService=e,this.applicationStateService=n,this.parentsService=i,this.pdfService=r,this.parents=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"firstParent",header:"Parent/Guardian"},{field:"secondParent",header:"Parent/Guardian"}],this.getparents()}getparents(){this.parentsService.getParents().subscribe(t=>{this.parents=t.data,this.toastService.addSingle("success","Parents Loaded","")},t=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")})}openNew(){this.dialogService.open(c.a,{data:{},header:"Enroll New parent",width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(t=>{t&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.parents)}}return t.\u0275fac=function(e){return new(e||t)(g.Pb(a.a),g.Pb(s.a),g.Pb(o.a),g.Pb(d.a),g.Pb(h))},t.\u0275cmp=g.Jb({type:t,selectors:[["app-parent-list"]],features:[g.Cb([a.a])],decls:16,vars:5,consts:[["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["header","Parents"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,e){1&t&&(g.Qb(0,"app-header-breadcrumb"),g.Vb(1,"div"),g.Vb(2,"button",0),g.dc("click",(function(){return e.openNew()})),g.Ic(3,"Create Parent"),g.Ub(),g.Vb(4,"button",1),g.dc("click",(function(){return e.exportPdf()})),g.Ic(5,"Parent report"),g.Ub(),g.Ub(),g.Vb(6,"p-panel",2),g.Vb(7,"p-table",3),g.Gc(8,D,6,1,"ng-template",4),g.Gc(9,x,12,8,"ng-template",5),g.Ub(),g.Vb(10,"div",6),g.Vb(11,"div",7),g.Vb(12,"label",8),g.Ic(13,"Page Size:"),g.Ub(),g.Ub(),g.Vb(14,"div",9),g.Vb(15,"input",10),g.dc("ngModelChange",(function(t){return e.pageSize=t})),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.Db(7),g.nc("value",e.parents)("paginator",!0)("rows",e.pageSize)("showCurrentPageReport",!0),g.Db(8),g.nc("ngModel",e.pageSize))},directives:[m.a,S.a,v.c,P.e,y.b,w.a,y.k,y.n,i.j,r.d],styles:[""]}),t})()}];let R=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[r.g.forChild(z)],r.g]}),t})();var C=n("EQGD"),L=n("K0h9");n.d(e,"ParentListModule",(function(){return M}));let M=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[i.b,R,L.a,C.a]]}),t})()},Olgc:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL"),r=n("7zfz");let a=(()=>{class t{constructor(t){this.messageService=t}addSingle(t,e,n){this.messageService.add({severity:t,summary:e,detail:n})}addMultiple(t){this.messageService.addAll(t)}clear(){this.messageService.clear()}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(r.d))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);
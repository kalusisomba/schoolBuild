(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{Olgc:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),o=n("7zfz");let r=(()=>{class t{constructor(t){this.messageService=t}addSingle(t,e,n){this.messageService.add({severity:t,summary:e,detail:n})}addMultiple(t){this.messageService.addAll(t)}clear(){this.messageService.clear()}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(o.d))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},im4Y:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),o=n("tyNb"),r=n("J7/z"),a=n("AlMu"),s=n("Olgc"),c=n("Q+Ew"),d=n("9CIP"),l=n("7zfz"),b=n("5JmO"),u=n.n(b),p=n("TruH"),m=n.n(p),f=n("uIk+"),g=n("fXoL");u.a.vfs=m.a.pdfMake.vfs;let h=(()=>{class t{constructor(t){this.canvas=t}setTitle(t,e,n,i,o,r,a){let s,c;return"A6"===a?(s=[15,10,0,10],c=8):(s=[15,10,0,10],c=10),[{table:{widths:["100%","0%"],body:[[{image:t,alignment:"center",width:60,height:30}],[{text:e,fontSize:c,alignment:"center",bold:!0}],[{text:n,fontSize:c,alignment:"center"}],[{text:i,fontSize:c,alignment:"center",italics:!0}],[{text:o,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(t){const e={fila_0:{}};return t.forEach((t,n)=>{e.fila_0["col_"+(+n+1)]={text:t,style:"tableHeader",margin:[0,8,0,0]}}),e}createBody(t,e){const n=[];for(const i in t){const e=[];for(const n in t[i])e.push(t[i][n]);n.push(e)}return e.forEach(t=>{const e=[];for(const n in t)e.push(t[n]);n.push(e)}),n}getDocDefinition(t,e,n,i,o,r,a,s,c,d){const l={header:{title:t,header1:e,header2:n,header3:i},body:{header:r,record:a}},b=this.createBody(this.createTableHeader(l.body.header),l.body.record);let u,p,m;return"A6"===d?(u=[10,110,10,55],p=10,m=7):(p=16,m=10,u=[10,110,10,55]),{pageOrientation:s,pageSize:d,pageMargins:u,header:this.setTitle(o,t,e,n,i,l,d),footer:(t,e)=>({text:"Page "+t.toString()+" of "+e,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:c,headerRows:1,body:b}}],styles:{header:{fontSize:p,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:m}}}}generatePdf(t){u.a.createPdf(t).print()}getPdfData(t){const e=["20%","35%","25%","20%"],n=["Adm Number","Student Name","Gender","pid Number"],i=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(o=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,o,n,this.mapData(t),"landscape",e,"A4"))})}mapData(t){return t.map(t=>({AdmNo:t.admissionNumber,StudentName:t.studentName,Gender:t.gender,pidNumber:t.pidNumber}))}}return t.\u0275fac=function(e){return new(e||t)(g.Zb(f.a))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=n("24YL"),v=n("7CaW"),y=n("rEr+"),w=n("3Pt+"),V=n("7kUa");function I(t,e){if(1&t){const t=g.Wb();g.Vb(0,"div",15),g.Qb(1,"i",16),g.Vb(2,"input",17),g.dc("input",(function(e){return g.zc(t),g.gc(),g.yc(10).filterGlobal(e.target.value,"contains")})),g.Ub(),g.Ub()}}function U(t,e){if(1&t&&(g.Vb(0,"th",20),g.Ic(1),g.Qb(2,"p-sortIcon",21),g.Ub()),2&t){const t=e.$implicit;g.nc("pSortableColumn",t.field),g.Db(1),g.Kc(" ",t.header," "),g.Db(1),g.nc("field",t.field)}}function N(t,e){if(1&t&&(g.Vb(0,"tr",18),g.Gc(1,U,3,3,"th",19),g.Vb(2,"th"),g.Ic(3,"Class"),g.Ub(),g.Vb(4,"th"),g.Ic(5,"Stream"),g.Ub(),g.Vb(6,"th"),g.Ic(7,"Action"),g.Ub(),g.Ub()),2&t){const t=g.gc();g.Db(1),g.nc("ngForOf",t.columns)}}function P(t,e){if(1&t&&(g.Vb(0,"td"),g.Vb(1,"div"),g.Ic(2),g.Ub(),g.Ub()),2&t){const t=e.$implicit,n=g.gc().$implicit;g.Db(2),g.Jc(n[t.field])}}const x=function(t){return["/main/students/","student-details",t]},C=function(t){return["/main/students/","student-edit",t]};function D(t,e){if(1&t&&(g.Vb(0,"tr",18),g.Gc(1,P,3,1,"td",22),g.Vb(2,"td"),g.Ic(3),g.Ub(),g.Vb(4,"td"),g.Ic(5),g.Ub(),g.Vb(6,"td"),g.Vb(7,"div",23),g.Vb(8,"button",24),g.Ic(9,"View"),g.Ub(),g.Vb(10,"button",25),g.Ic(11,"Edit"),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t){const t=e.$implicit,n=g.gc();g.Db(1),g.nc("ngForOf",n.columns),g.Db(2),g.Jc(t.unitCurrent),g.Db(2),g.Jc(t.stream.streamName),g.Db(3),g.nc("routerLink",g.qc(5,x,t._id)),g.Db(2),g.nc("routerLink",g.qc(7,C,t._id))}}function z(t,e){1&t&&(g.Vb(0,"tr"),g.Vb(1,"td",26),g.Ic(2,"No data found."),g.Ub(),g.Ub())}const O=function(){return[10,25,50,100]},k=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o){this.dialogService=t,this.toastService=e,this.pdfService=n,this.applicationStateService=i,this.studentsService=o,this.students=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"admissionNumber",header:"adm Number"},{field:"studentName",header:"Student Name"},{field:"gender",header:"Gender"},{field:"pidNumber",header:"pid Number"}],this.exportColumns=this.columns.map(t=>({title:t.header,dataKey:t.field})),this.getStudents()}getStudents(){this.studentsService.getStudents().subscribe(t=>{this.students=t.data,this.toastService.addSingle("success","Students Loaded","")},t=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")})}openNew(){this.dialogService.open(d.a,{data:{},header:"Enroll New Student",width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(t=>{t&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.students)}}return t.\u0275fac=function(e){return new(e||t)(g.Pb(r.a),g.Pb(s.a),g.Pb(h),g.Pb(a.a),g.Pb(c.a))},t.\u0275cmp=g.Jb({type:t,selectors:[["app-student-list"]],features:[g.Cb([r.a,l.d])],decls:21,vars:9,consts:[["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["type","button","pRipple","","icon","pi pi-filter","pTooltip","Selection Only","tooltipPosition","bottom",1,"btn","btn-success","btn-sm",3,"click"],["header","Students"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"columns","value","paginator","resizableColumns","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[2,"text-align","right"],[1,"pi","pi-search",2,"margin","4px 4px 0 0"],["type","text","pInputText","","size","20","placeholder","Global Filter",2,"width","auto",3,"input"],[1,"text-sm"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["colspan","5"]],template:function(t,e){if(1&t){const t=g.Wb();g.Qb(0,"app-header-breadcrumb"),g.Vb(1,"div"),g.Vb(2,"button",0),g.dc("click",(function(){return e.openNew()})),g.Ic(3,"Create New Student"),g.Ub(),g.Vb(4,"button",1),g.dc("click",(function(){return e.exportPdf()})),g.Ic(5,"student report"),g.Ub(),g.Vb(6,"button",2),g.dc("click",(function(){return g.zc(t),g.yc(10).exportCSV({selectionOnly:!0})})),g.Ic(7,"Print Filtered"),g.Ub(),g.Ub(),g.Vb(8,"p-panel",3),g.Vb(9,"p-table",4,5),g.Gc(11,I,3,0,"ng-template",6),g.Gc(12,N,8,1,"ng-template",7),g.Gc(13,D,12,9,"ng-template",8),g.Gc(14,z,3,0,"ng-template",9),g.Ub(),g.Vb(15,"div",10),g.Vb(16,"div",11),g.Vb(17,"label",12),g.Ic(18,"Page Size:"),g.Ub(),g.Ub(),g.Vb(19,"div",13),g.Vb(20,"input",14),g.dc("ngModelChange",(function(t){return e.pageSize=t})),g.Ub(),g.Ub(),g.Ub(),g.Ub()}2&t&&(g.Db(9),g.nc("columns",e.columns)("value",e.students)("paginator",!0)("resizableColumns",!0)("rows",e.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",g.pc(8,O)),g.Db(11),g.nc("ngModel",e.pageSize))},directives:[S.a,v.a,y.c,l.e,w.b,V.a,w.k,w.n,i.j,y.b,y.a,o.d],styles:[""]}),t})()}];let R=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(k)],o.g]}),t})();var M=n("EQGD"),T=n("K0h9");n.d(e,"StudentListModule",(function(){return L}));let L=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[i.b,R,T.a,M.a]]}),t})()}}]);
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{Olgc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),a=n("7zfz"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.messageService=t}return _createClass(e,[{key:"addSingle",value:function(e,t,n){this.messageService.add({severity:e,summary:t,detail:n})}},{key:"addMultiple",value:function(e){this.messageService.addAll(e)}},{key:"clear",value:function(){this.messageService.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Zb(a.d))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},im4Y:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),a=n("tyNb"),r=n("J7/z"),o=n("AlMu"),c=n("Olgc"),s=n("Q+Ew"),u=n("9CIP"),l=n("7zfz"),d=n("5JmO"),b=n.n(d),p=n("TruH"),f=n.n(p),m=n("uIk+"),h=n("fXoL");b.a.vfs=f.a.pdfMake.vfs;var g,v=((g=function(){function e(t){_classCallCheck(this,e),this.canvas=t}return _createClass(e,[{key:"setTitle",value:function(e,t,n,i,a,r,o){var c;return[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:c="A6"===o?8:10,alignment:"center",bold:!0}],[{text:n,fontSize:c,alignment:"center"}],[{text:i,fontSize:c,alignment:"center",italics:!0}],[{text:a,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}},{key:"createTableHeader",value:function(e){var t={fila_0:{}};return e.forEach((function(e,n){t.fila_0["col_"+(+n+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}})),t}},{key:"createBody",value:function(e,t){var n=[];for(var i in e){var a=[];for(var r in e[i])a.push(e[i][r]);n.push(a)}return t.forEach((function(e){var t=[];for(var i in e)t.push(e[i]);n.push(t)})),n}},{key:"getDocDefinition",value:function(e,t,n,i,a,r,o,c,s,u){var l,d,b,p={header:{title:e,header1:t,header2:n,header3:i},body:{header:r,record:o}},f=this.createBody(this.createTableHeader(p.body.header),p.body.record);return"A6"===u?(l=[10,110,10,55],d=10,b=7):(d=16,b=10,l=[10,110,10,55]),{pageOrientation:c,pageSize:u,pageMargins:l,header:this.setTitle(a,e,t,n,i,p,u),footer:function(e,t){return{text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}},content:[{style:"tableContent",table:{widths:s,headerRows:1,body:f}}],styles:{header:{fontSize:d,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:b}}}}},{key:"generatePdf",value:function(e){b.a.createPdf(e).print()}},{key:"getPdfData",value:function(e){var t=this,n=["20%","35%","25%","20%"],i=["Adm Number","Student Name","Gender","pid Number"],a="Date: ".concat((new Date).toLocaleString());this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then((function(r){t.generatePdf(t.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",a,r,i,t.mapData(e),"landscape",n,"A4"))}))}},{key:"mapData",value:function(e){return e.map((function(e){return{AdmNo:e.admissionNumber,StudentName:e.studentName,Gender:e.gender,pidNumber:e.pidNumber}}))}}]),e}()).\u0275fac=function(e){return new(e||g)(h.Zb(m.a))},g.\u0275prov=h.Lb({token:g,factory:g.\u0275fac,providedIn:"root"}),g),S=n("24YL"),y=n("7CaW"),C=n("rEr+"),k=n("3Pt+"),w=n("7kUa");function P(e,t){if(1&e){var n=h.Wb();h.Vb(0,"div",15),h.Qb(1,"i",16),h.Vb(2,"input",17),h.dc("input",(function(e){return h.zc(n),h.gc(),h.yc(10).filterGlobal(e.target.value,"contains")})),h.Ub(),h.Ub()}}function V(e,t){if(1&e&&(h.Vb(0,"th",20),h.Ic(1),h.Qb(2,"p-sortIcon",21),h.Ub()),2&e){var n=t.$implicit;h.nc("pSortableColumn",n.field),h.Db(1),h.Kc(" ",n.header," "),h.Db(1),h.nc("field",n.field)}}function I(e,t){if(1&e&&(h.Vb(0,"tr",18),h.Gc(1,V,3,3,"th",19),h.Vb(2,"th"),h.Ic(3,"Class"),h.Ub(),h.Vb(4,"th"),h.Ic(5,"Stream"),h.Ub(),h.Vb(6,"th"),h.Ic(7,"Action"),h.Ub(),h.Ub()),2&e){var n=h.gc();h.Db(1),h.nc("ngForOf",n.columns)}}function U(e,t){if(1&e&&(h.Vb(0,"td"),h.Vb(1,"div"),h.Ic(2),h.Ub(),h.Ub()),2&e){var n=t.$implicit,i=h.gc().$implicit;h.Db(2),h.Jc(i[n.field])}}var N=function(e){return["/main/students/","student-details",e]},x=function(e){return["/main/students/","student-edit",e]};function D(e,t){if(1&e&&(h.Vb(0,"tr",18),h.Gc(1,U,3,1,"td",22),h.Vb(2,"td"),h.Ic(3),h.Ub(),h.Vb(4,"td"),h.Ic(5),h.Ub(),h.Vb(6,"td"),h.Vb(7,"div",23),h.Vb(8,"button",24),h.Ic(9,"View"),h.Ub(),h.Vb(10,"button",25),h.Ic(11,"Edit"),h.Ub(),h.Ub(),h.Ub(),h.Ub()),2&e){var n=t.$implicit,i=h.gc();h.Db(1),h.nc("ngForOf",i.columns),h.Db(2),h.Jc(n.unitCurrent),h.Db(2),h.Jc(n.stream.streamName),h.Db(3),h.nc("routerLink",h.qc(5,N,n._id)),h.Db(2),h.nc("routerLink",h.qc(7,x,n._id))}}function z(e,t){1&e&&(h.Vb(0,"tr"),h.Vb(1,"td",26),h.Ic(2,"No data found."),h.Ub(),h.Ub())}var O,_,R=function(){return[10,25,50,100]},T=[{path:"",component:(O=function(){function e(t,n,i,a,r){_classCallCheck(this,e),this.dialogService=t,this.toastService=n,this.pdfService=i,this.applicationStateService=a,this.studentsService=r,this.students=[],this.isMobileResolution=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"admissionNumber",header:"adm Number"},{field:"studentName",header:"Student Name"},{field:"gender",header:"Gender"},{field:"pidNumber",header:"pid Number"}],this.exportColumns=this.columns.map((function(e){return{title:e.header,dataKey:e.field}})),this.getStudents()}},{key:"getStudents",value:function(){var e=this;this.studentsService.getStudents().subscribe((function(t){e.students=t.data,e.toastService.addSingle("success","Students Loaded","")}),(function(t){e.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")}))}},{key:"openNew",value:function(){var e=this;this.dialogService.open(u.a,{data:{},header:"Enroll New Student",width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe((function(t){t&&e.toastService.addSingle("success","panel closed","")}))}},{key:"exportPdf",value:function(){this.pdfService.getPdfData(this.students)}}]),e}(),O.\u0275fac=function(e){return new(e||O)(h.Pb(r.a),h.Pb(c.a),h.Pb(v),h.Pb(o.a),h.Pb(s.a))},O.\u0275cmp=h.Jb({type:O,selectors:[["app-student-list"]],features:[h.Cb([r.a,l.d])],decls:21,vars:9,consts:[["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["type","button","pRipple","","icon","pi pi-filter","pTooltip","Selection Only","tooltipPosition","bottom",1,"btn","btn-success","btn-sm",3,"click"],["header","Students"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"columns","value","paginator","resizableColumns","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[2,"text-align","right"],[1,"pi","pi-search",2,"margin","4px 4px 0 0"],["type","text","pInputText","","size","20","placeholder","Global Filter",2,"width","auto",3,"input"],[1,"text-sm"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["colspan","5"]],template:function(e,t){if(1&e){var n=h.Wb();h.Qb(0,"app-header-breadcrumb"),h.Vb(1,"div"),h.Vb(2,"button",0),h.dc("click",(function(){return t.openNew()})),h.Ic(3,"Create New Student"),h.Ub(),h.Vb(4,"button",1),h.dc("click",(function(){return t.exportPdf()})),h.Ic(5,"student report"),h.Ub(),h.Vb(6,"button",2),h.dc("click",(function(){return h.zc(n),h.yc(10).exportCSV({selectionOnly:!0})})),h.Ic(7,"Print Filtered"),h.Ub(),h.Ub(),h.Vb(8,"p-panel",3),h.Vb(9,"p-table",4,5),h.Gc(11,P,3,0,"ng-template",6),h.Gc(12,I,8,1,"ng-template",7),h.Gc(13,D,12,9,"ng-template",8),h.Gc(14,z,3,0,"ng-template",9),h.Ub(),h.Vb(15,"div",10),h.Vb(16,"div",11),h.Vb(17,"label",12),h.Ic(18,"Page Size:"),h.Ub(),h.Ub(),h.Vb(19,"div",13),h.Vb(20,"input",14),h.dc("ngModelChange",(function(e){return t.pageSize=e})),h.Ub(),h.Ub(),h.Ub(),h.Ub()}2&e&&(h.Db(9),h.nc("columns",t.columns)("value",t.students)("paginator",!0)("resizableColumns",!0)("rows",t.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",h.pc(8,R)),h.Db(11),h.nc("ngModel",t.pageSize))},directives:[S.a,y.a,C.c,l.e,k.b,w.a,k.k,k.n,i.j,C.b,C.a,a.d],styles:[""]}),O)}],M=((_=function e(){_classCallCheck(this,e)}).\u0275mod=h.Nb({type:_}),_.\u0275inj=h.Mb({factory:function(e){return new(e||_)},imports:[[a.g.forChild(T)],a.g]}),_),L=n("EQGD"),A=n("K0h9");n.d(t,"StudentListModule",(function(){return E}));var G,E=((G=function e(){_classCallCheck(this,e)}).\u0275mod=h.Nb({type:G}),G.\u0275inj=h.Mb({factory:function(e){return new(e||G)},imports:[[i.b,M,A.a,L.a]]}),G)}}]);